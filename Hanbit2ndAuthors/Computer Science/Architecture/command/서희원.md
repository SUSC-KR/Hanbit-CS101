# 명령어

고급언어: 컴퓨터 보단 사람이 이해하기 쉽도록 만들어진 언어

저급 언어: 컴퓨터가 더 이해하기 쉽도록 만들어진 언어

그래서 고급언어로 작성한 코드는 저급언어로 변환된다.

## 저급 언어

저급언어는 기계어와 어셈블리어 두가지가 있다.

기계어는 0과 1로 이루어져 있는데, 이런 0과 1로 이루어진 명령어를 그나마 읽기 편한 형태로 변환한 언어가 어셈블리어다.

하드웨어와 관련한 개발을 하는 개발자들은 어셈블리어를 많이 보게되는데, 이들에게는 매우 중요한 작성의 대상이며, 관찰의 대상이다.

## 컴파일 언어와 인터프리터 언어

고급언어를 저급언어로 변환하는 방식

### 컴파일 언어

대표적인 언어: C

- 컴파일: 저급 언어로 변환하는 과정
- 컴파일러: 저급 언어로 변환하는 도구
- 전체적인 소스코드를 쭉 훑어보고 오류, 불필요한 점 등을 찾아낸다. 만약 오류가 있다면 컴파일에 실패한다.
- 목적코드: 소스코드가 컴퓨터가 이해할 수 있는 저급 언어로 변환된 코드

### 인터프리터 언어

대표적인 언어: 파이썬

- 소스코드를 한줄씩 실행하며 저급 언어로 변환한다.
- 인터프리터: 저급언어로 변환하는 도구

인터프리터 언어가 컴파일 언어보다 느리다.

인터프리터 언어는 한줄씩 저급 언어로 해석하며 실행해야 하기 때문이다.

그리고 컴파일과 인터프리터 둘 다 실행하는 언어(JAVA)도 있으므로 정확히 이 언어가 인터프리터인지 컴파일인지 구분하지 않아도 된다.

### 목적파일, 실행파일

목적파일: 목적 코드로 이루어진 파일

실행파일: 실행 코드로 이루어진 파일

목적 코드가 실행 파일이 되기 위해 **링킹**이라는 작업을 거쳐야 한다.

만약 add파일과 add파일을 포함하는 코드가 있는 main파일이 있다 가정할 경우, main파일이 목적 파일로 변환되어도 add파일의 내용을 알지 못하기 때문에(아직 변환을 안했기 때문에)

**링킹** 작업을 통해 목적 파일에 연결 짓는 작업이 필요하다.

## 명령어의 구조

### 연산 코드와 오퍼랜드

명령어는 연산 코드와 오퍼랜드로 구성되어 있다.

연산 코드(연산자): 명령어가 수행할 연산

오퍼랜드(피연산자): 연산에 사용할 데이터 또는 연산에 사용할 데이터가 저장된 위치

### 오퍼랜드

오퍼랜드 필드에는 숫자와 문자 등을 나타내는 데이터 또는 메모리나 레지스터 주소가 올 수 있다.

다만 오퍼랜드 필드(주소 필드)에는 데이터를 직접 명시하기 보다는 메모리 주소나 레지스터 이름을 담는다.

오퍼랜드가 몇개 있느냐에 따라 0-주소 명령어, 1 주소 명령어 등으로 나눈다.

### 연산 코드

가장 기본적인 연산 코드는 크게 네가지로 나눌 수 있다.

1. 데이터 전송
2. 산술/논리 연산
3. 제어 흐름 변경
4. 입출력 제어

- 데이터 전송

  - MOVE: 데이터를 옮겨라
  - STORE: 메모리에 저장하라
  - LOAD(FETCH): 메모리에서 CPU로 데이터를 가져와라
  - PUSH: 스택에 데이터를 저장하라
  - POP: 스택의 최상단 데이터를 가져와라

- 산술/논리 연산

  - ADD / SUBTRACT / MULTIPLY / DIVIDE: 덧셈, 뺄셈, 곱셈, 나눗셈을 수행하라
  - INCREMENT / DECREMENT: 오퍼랜드에 1을 더하라, 오퍼램드에 1을 빼라
  - AND / OR / NOT: 해당 연산을 수행하라
  - COMPARE: 두개의 숫자 또는 TRUE / FALSE 값을 비교하라

- 제어 흐름 변경

  - JUMP: 특정 주소로 실행 순서를 옮겨라
  - CONDITIONAL JUMP: 조건에 부합할 때 특정 주소로 실행 순서를 옮겨라
  - HALT: 프로그램 실행을 멈춰라
  - CALL: 되돌아올 주소를 저장한 채 특정 주소로 실행 순서를 옮겨라
  - RETURN: CALL을 호출할 때 저장했던 주소로 돌아가라

- 입출력 제어
  - READ(INPUT): 특정 입출력 장치로부터 데이터를 읽어라
  - WRITE(OUTPUT): 특정 입출력 장치로 데이터를 써라
  - START IO: 입출력 장치를 시작하라
  - TEST IO: 입출력 장치의 상태를 확인하라

## 주소 지정 방식

연산에 사용할 데이터를 찾는 방식

CPU에는 다양한 주소 지정 방식이 있는데 이중 5가지를 살펴볼 것이다.

1. 즉시 주소 지정 방식
   - 연산에 사용할 데이터를 오퍼랜드 필드에 직접 명시하는 방식
   - 가장 간단하다.
   - 데이터의 크기가 작아지지만 데이터를 찾는 속도는 빠르다.
2. 직접 주소 지정 방식
   - 오퍼랜드 필드에 유효 주소를 직접적으로 명시하는 방식
   - 오퍼랜드 필드에서 표현할 수 있는 데이터의 크기는 즉시 주소 지정 방식보다 크지만
     유효주소를 표현할 수 있는 범위가 연산 코드의 비트 수만큼 줄어든다.
3. 간접 주소 지정 방식
   - 유효 주소의 주소를 오퍼랜드 필드에 명시한다.
   - 유효 주소의 범위가 커졌지만
     두번의 메모리 접근이 필요해 일반적으로 느리다.
4. 레지스터 주소 지정 방식
   - 직접 주소 지정 방식과 비슷하게 데이터를 저장한 레지스터를 오퍼랜드 필드에 직접 명시한다.
   - 메모리에 접근하는 방식보다 레지스터에 접근하는 방식이 더빠르다.
   - 그래서 빠르게 접근 가능하지만, 표현할 수 있는 레지스터 크기에 제한이 생길 수 있다.
5. 레지스터 간접 주소 지정 방식
   - 연산에 사용할 데이터를 메모리에 저장하고 그 주소를 저장한 레지스터를 오퍼랜드 필드에 명시한다.
   - 메모리에 접근하는 횟수가 한번으로 줄어들기 때문에 간접 주소 지정 방식보다 빠르다.
