# 18차시 CPU가 하는 명령의 형식 
* 명령어 구조/형식의 이해

* 

## 명령의 구조
* 연산 코드: 수행해야 할 동장을 명시하는 부분
* 피연산자: 실제 데이터 값이나 주소
[ ADD ][  100 , 200 ]


피연산자가 데이터 주소를 나타내면, 위의 결과는 100번지의 값과 200번지의 값을 더함 




## 0주소 명령어: 피 연산자 없이 연산 코드만으로 구성되는 명령어
ex. pop 명령어



## 1주소 명령어: 연산코드 1개와 피연산자로 구성되는 명령어
* 하나의 피연산자만 포함하고 다른 피연산자나 결과값은 누산기에 저장됨 
ex. ADD [100] ; 100번지 데이터와 누산기의 값을 더한 후 저장함



## 2주소 명령어: 연산코드와 2개의 피연산자로 구성됨
ex. ADD [100] [200] : 100번지와 200번지의 데이터를 더한 후 연산 결과를 100번지에 저장함 



## 3주소 명령어: 연산 코드와 3개의 피연산자로 구성되는 명령어
* 연산 결과는 피연산자 3에 저장되므로, 연산 후 입력 데이터가 변하지 않고 보존됨 
ex. ADD [100] [200] [200] : 100번지와 200번지를 더해 300번지에 저장함 



## 결과값 저장 위치
* 0주소 > 저장된 구조가 변화
* 1주소 > cpu내 레지스터 
* 2주소 > 피연산자 1
* 3주소 > 피연산자 3



# 첨삭 
* 주소가 적을수록 : 더 값싸고
* 주소가 많을수록 : 더 쉬움 
* 명령어 (19차시에 나오는 내용) 
  - ADD = 더하기
  - SUB = 뺄셈
  - MUL = 곱셈
  - DIV = 나눗셈
  - MOV = 데이터 이동 (레지스터-기억장치)
  - LOAD = 데이터 적재 
  - STOR = 기억장치에 저장 

* ex. x = (A + B) * (C - D) 연산을 할 때 (1-주소 형식)
  - LOAD A (R1에 A값을 적재)
  - ADD B (A에 B를 더한 후 A에 저장)
  - STOR T (임시 저장)
  - 이때 T는 기억장치 내 임시 저장 장소의 주소, 중간 결과를 임시로 저장하기 위함 
  - LOAD C (R2에 C값을 적재)
  - SUB D (C에 D를 뺀 후 C에 저장)
  - MUL T (T에 C-D를 곱셈) 
  - STOR X (저장)

## 문제 (위 첨삭 내용을 참고하여) 
* (1) x = (A + B) * (C - D)을  2-주소 형식으로 연산 
* (2) x = (A + B) * (C - D)을  3-주소 형식으로 연산 
* (3) 다음은 0-주소 명령어 방식으로 이루어진 프로그램이다. 레지스터 X의 내용은?
  - LOAD A 
  - SUB B
  - DIV C
  - STOR T
  - LOAD D
  - MUL E
  - SUB T
  - STOR X

## 정답
* (1)
  - MOV R1, A (레지스터 1로 A를 이동합니다)
  - ADD R1, B (레지스터 1에 B를 더하고 저장)
  - MOV R2, C (레지스터 2로 C를 이동)
  - SUB R2, D (레지스터 2에 D를 빼고 저장)
  - MUL R1, R2 (R1과 R2를 곱합니다) 
  - MOV X, R1 (X로 이 데이터를 이동합니다) 

*  이때 ADD A,B가 아니라 ADD R1, A인 이유는?
  -  모든 오퍼랜드(피연산자)가 메모리일 수 없음, 그래서 레지스터 번호를 포함해야 함 
  - 이때 여러개의 CPU를 사용하기 때문에 가격이 비싸집니다. 대신 프로그램 길이가 1-주소 형식에 비해 짧아졌습니다 (쉬워짐)

* (2)
  - ADD R1, A, B (A와 B를 더해 R1에 저장)
  - SUB R2, C, D (C와 D를 빼 R2에 저장)
  - MUL X, R1, R2  (R1과 R2를 곱해 X에 저장)


* (3)
   X =  D * E  - { (A - B) / C }

## 질문
3-주소 명령어의 경우 [ 연산코드 ][ 피연산자1][피연산자2][피연산자3]일때, 강의에서는 1과 2를 연산한 결과를 3에 저장한다고 했는데, 제가 배운 바로는 2와 3을 연산해서 1에 저장하는 것으로 알고 있어서 무엇이 맞는지 궁금합니다.  
